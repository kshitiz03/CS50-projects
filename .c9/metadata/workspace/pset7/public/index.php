{"filter":false,"title":"index.php","tooltip":"/pset7/public/index.php","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":9,"column":0},"action":"remove","lines":["<?php","","    // configuration","    require(\"../includes/config.php\"); ","","    // render portfolio","    render(\"portfolio.php\", [\"title\" => \"Portfolio\"]);","","?>",""],"id":2},{"start":{"row":0,"column":0},"end":{"row":28,"column":0},"action":"insert","lines":["<?php","    // configuration","    require(\"../includes/config.php\"); ","    $rows = cs50::query(\"SELECT * FROM portfolios WHERE id = ?\", $_SESSION[\"id\"]);","    ","    $positions = [];","    $spent=0;","    foreach ($rows as $row)","    {   ","    $stock = lookup($row[\"symbol\"]);","    ","    if ($stock !== false)","    {","        $positions[] = [","            \"name\" => $stock[\"name\"],","            \"price\" => $stock[\"price\"],","            \"shares\" => $row[\"shares\"],","            \"symbol\" => $row[\"symbol\"],","            \"total\"=> number_format($stock[\"price\"]*$row[\"shares\"],2, '.', '')","        ];","    }","    }","    $row = cs50::query(\"SELECT * FROM users WHERE id = ?\", $_SESSION[\"id\"]);","    $cash=$row[0][\"cash\"];","    ","    render(\"portfolio.php\", [\"positions\" => $positions, \"title\" => \"Portfolio\",\"m\"=>$cash]);","?>","",""]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":28,"column":0},"end":{"row":28,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":24,"state":"php-start","mode":"ace/mode/php"}},"timestamp":1467955837927,"hash":"e38d76b44670cd9585578ca6cdca667231b9455c"}